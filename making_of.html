<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>制作過程 - INFPのあだおか</title>
  <style>
    body {
      background: #000;          /* 全体の背景を黒 */
      color: #fff;              /* 文字色は白 */
      font-family: 'Nunito', sans-serif;
      margin: 0;
      padding: 0;
    }
    .wrapper {
      max-width: 900px;         /* 中央に寄せるための最大幅 */
      margin: 0 auto;           /* 左右マージン自動で中央寄せ */
      padding: 20px;
    }
    .header {
      text-align: center;
      margin-bottom: 30px;
    }
    h1 {
      font-size: 2rem;
      margin-bottom: 10px;
    }
    .header p {
      font-size: 1rem;
      color: #ccc;
    }

    /* セクションごとに背景を少しグレー寄りにしてコントラストを付ける */
    .section {
      background: #111;
      padding: 20px;
      border-radius: 8px;
      margin-bottom: 30px;
    }
    .section h2 {
      margin-top: 0;
      margin-bottom: 10px;
      font-size: 1.5rem;
      color: #ff69b4; /* ピンクでアクセント */
    }
    .section p {
      line-height: 1.7;   /* 行間を少し広めに */
      margin-bottom: 15px;
    }
    .section img {
      display: block;
      margin: 10px auto;
      max-width: 100%;
      border-radius: 4px;
      border: 1px solid #444;
    }

    .back-link {
      text-align: center;
      margin-top: 20px;
    }
    .back-link a {
      color: #ff69b4;
      text-decoration: none;
      font-weight: bold;
      transition: color 0.3s ease;
    }
    .back-link a:hover {
      text-decoration: underline;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>　制作過程</h1>
    
    <div class="section">
      <h2>【1日目】AIの作成</h2>
      <p>私「AI作れたら面白そうだよね～」、 鬼「やってみてほしいです！」</p>
      <p>こんな感じのIQ３の雑談をきっかけに、とりあえずやってみることにした。<br>
        今振り返ってみると、PythonのFlaskにてあだＴのウェブアプリを作成。キャラクターをプロンプトに組み込みつつ、言語処理はGoogleの生成AI「Gemini」のAPIに橋渡しさせて処理させた。<br>
        …ってことらしい。何を言ってるのかわからないと思うが、俺も何を言ってるのかわからない。</p>
       
        
     <p>【導入】<br>
        まずはAIを手に入れることにした。厳密にいうとLLM（大規模言語モデル）であり、画像生成とかは出来ないから生成AIの一部で言語部分って感じ。<br>
        つまり、ディープラーニングなるえっちな技術で作られた言語モデル。ということである。（大嘘）<br>
        Nomic AIなる会社が開発したGPT4ALLというアプリにローカル環境で動かせるLLMが多数あるということでDLしてみた。</p>
       <img src="DAY1-1.png" alt="1日目: AI作成の様子" width="500">

    <p>御覧のとおり、今回、１日目も２日目も作業環境では英語しか登場しない。（真に遺憾であるっ…）<br>
        本アプリでも当然のように英語しか記載がなく、当然のように読めない。（真に遺憾であるっ…）<br>
        若き頃、金髪美女の外人へ脊髄反射で声をかけて、最終的にはOh!Crazy Japanese!!と言われたことを思いだす。（真に遺憾であるっ…）</p>
      
    <p>さて、Suddenly I Seeをかけながらアメリカンな気分で色々調べたところMistral（仏）、LLaMA2（Meta）とかいうのがおすすめらしいのでDL。<br>
        既にここまでで大分苦労したが、四苦八苦しながら初期設定を終わらせ、ここからスクリプトを書き始める。</p>

    　<p>【作成】<br>
        アプリケーションはPythonのFlaskにて作成した。<br>
        キャラクター設定にあたっては過去のあだＴの発言をＧＰＴに分析させて設定を作りこんでみたが、これがなかなか的を得ていて草が生える。</p>
        <img src="DAY1-2.png" alt="1日目: AI作成の様子" width="500">
        
        <p>そして、DLしたプログラムを動かすためのスクリプトをＧＰＴに聞きながら作成する。<br>
        どうやらPythonのスクリプトでキャラクターを設定し、その内容をDLしたLLMに読みこませながらAIの回答を出すような形らしい。<br>
        ということで、全体としては、以下のような流れとなった。<br>
        ⓵言語処理のためのLLMを用意する<br>
        ⓶ユーザーからの入力を⓵に受け渡すアプリを作成（Flask）<br>
        ⓷⓶のアプリをローカル環境で起動させる（ターミナル）<br>
        ⓸HTMLでチャット画面を作成し、⓷のアプリに繋げて、質問と回答の入出力を可能にする</p>

        <p>設定やスクリプトに謎が多すぎて意味不明。<br>
           俺の理解度が「電子レンジの中で爆発する卵」レベルなので、気がついたら「うわああああ！！！」って叫んでた。<br>
           でもまあ、冷静になって進める。（無理）<br>
           そして、とうとう成功の時を迎える・・・！</p>
        <img src="DAY1-3.png" alt="1日目: AI作成の様子" width="700">
        <p>いや、ジャニーさんみたいになってるじゃねーか！！！！<br>
           「人間なんですか？ユー」じゃねーんだよっ<br>
           どう見ても人間の回答じゃねーのに、なんで人間と思われてるスタンスなんだよ、こいつ…</p>
           <p>　</p>
           <p>…と、まあ文句を言いつつも、動くようになって一歩前進！と喜びつつスクリプトの修正をすることにした。<br>
           早速、ＧＰＴに「話がかみ合わないから修正して」と指示したところ、<br>
           スクリプトのルールの部分に「人の話はちゃんと聞こう」みたいな記載が追加される。<br>
           おまえ、小学生じゃないんだから…と不安を覚えながらも一旦、修正後のスクリプトで起動させてみる。すると… </p>
           <img src="DAY1-4.png" alt="1日目: AI作成の様子" width="700">

           <p>…うーん、人の話はちゃんと聞こう！？<br>
            あと、キラキラＯＬを見切らすの面白いからやめてほしい。続きめっちゃ気になるやん…<br>
            てかこれ、Q「あだおかは会社で働いてるの？」A「キラキラＯＬ！」って答えようとしてないか？天才かよ…<br>
            って…なるほど。どうもユーザーからの想定Ｑが出力されてるみたいなので、これを修正してみるか…
             </p>
             <img src="DAY1-5.png" alt="1日目: AI作成の様子" width="700">
             <p>おお！？前よりよくなった！！けど、なんだろう…なんか、こいつイライラするぞ！？<br>
                前より人間っぽくなったせいで、逆にイライラする！？<br>
                てか、草生やしすぎだろ、こいつっ…煽ってきてんじゃねーぞ！再調教だ！！</p>

        
             <p>　</p>
             <p>・・・・</p>
             <p>　</p>
             <img src="DAY1-11.png" alt="1日目: AI作成の様子" width="700">
             <p>
               はい、無理でした～<br>
               Mistral→LLaMA2に変更してみたりもしたけど、結果はこの通り、悲しきモンスターになっただけでした。（何喰ってんだよ、こいつ）<br>
               まるでGTAのNPC。俺が何をしてもクラクション鳴らしてくる。<br>
               結局、原因はLLMのスペックが足りないってとこみたい。てか、どれも日本語が弱い。<br>
               ということでマイナーなLLMをローカル環境で使用するのはやめて、日本語に対応してそうな有名なAPI（オンライン上で生成AIを使用するサービス）を使用することにした。<br>
               ＧＰＴに騙されながら色々試したころ、OpenAIやAnthropic、DeepSeekなどのAPIは全部有料だったため諦める。<br>
               しかし、唯一、Googleの「Gemini」は無料で使える枠がありそうなので試してみる。すると、<br>
               <img src="DAY1-7.png"  width="700">

               <p>いにしえのオタクになった！！？？<br>
                 ノシとか現実で使ってるのみたことねぇし、そもそもノシってなんだよ…<br>
                 ってそうか、序盤に設定した「ネットスラング」がちゃんと出力されてるのか？<br>
                 なんか会話は普通にできてるし、これ修正したらいけるんじゃね！？<br>
                 ってなわけで、何度か試した結果をＧＰＴに見せて問題点を指摘させてみる！すると…

                 <img src="DAY1-6.png"  width="700">
                 <p>そこは、エラーじゃないんだなああ！！<br>
                    いや、気持ちはすんごく分かるんだけどさ、そこはね、あってんのよ。<br>
                    「ｗｗｗ」を忘れるようじゃダメなのよ、「ｗｗｗ」はね、入れとかないと。<br>
               
               <p>　</p>
               <p>【完成】<br>
                そこから、さらに微調整して、AI自体はほぼ完成。<br>
                基本的に発言内容にまともなワードがないため、若干会話がかみ合わない気がするけど、ここはワードを増やせば対応可能。<br>
                ただし、⓶のアプリはローカルにあるから、PCで起動させておかないとHPのチャットが使えない状況。<br>
                 こんな感じで１日目にはチャットAI あだTは完成したけど、PC起動に縛られる環境となった。<br>
                （参考：微調整前のあだT）</p>
                <img src="DAY1-8.png"  width="700">
               

                <div class="section">
                    <h2>【2日目】Vercelでクラウド上からの起動</h2>
                    <p>1日目でローカル環境での動作は確認できたものの、PCでアプリを起動しておかないとAIが動作しないという問題がある。<br>
                       これでは実用性に欠けるため、Vercelというクラウドサービスを使ってオンライン上で動作するようにしてみることにした。<br>
                       正直、簡単だろうと高を括っていたのだが、今回、これが最も大変な作業となった。<br>
                    </p>
                    
                    <p>【環境構築】<br>
                       まずはFlaskアプリをクラウド上で動作させるために、Vercelのアカウントを作成。<br>
                       どうやらVercelはNode.jsとかいう 「俺たちPython勢には縁がない陽キャ文化」 を基盤にしているらしい。<br>
                       まじでクラスの隅っこにいる俺たちが、リア充グループに無理やり混ざるようなもん。キツすぎる。<br>
                       VercelはNode.js向けに最適化されているため、FlaskのようなPythonアプリを動かすには、設定を工夫する必要があり、これが苦行の始まりとなる。<br>
                       （Vercelさんも無論、日本語不可）
                       <img src="DAY1-12.png"  width="1000">


                    <p>【デプロイの試行錯誤】<br>
                      GitHubに作成したFlaskアプリのリポジトリをVercelに連携。いざデプロイを試みるも、エラーが発生…<br>
                      Vercel「404 Not Found」<br>
                      俺「何が？」<br><br>
                      Vercel「知らんけど？」
                      俺「お前のこと聞いてんだよ！！！」<br>
                      最早、パルスのルシがコクーンでパージ…みたいな状況で何ひとつ理解できない。</p>
                       <img src="DAY1-13.png"  width="700">
                    <p>とりあえず、４０４の状態だと、あだTに何を送信してもエラーとなるため、ここからはもう片っ端に色々試していく。</p>

                        <p>　</p>
                        <p>・・・３時間後・・・</p>
                        <p>　</p>

                        <p>「お砂糖」<br>
                        「スパイス」<br>
                        「素敵なものをいっぱい」<br>
                        全部混ぜるとむっちゃ可愛い女の子が出来る……はずだった<br>
                        だけど、ユートニウム博士は間違って余計なものまで入れちゃった！それは？<br>
                        「ケミカルX」<br>
                        そして産まれた超強力三人娘！スーパーパワーで悪い奴らをやっつける！<br>
                        ブロッサム！<br>
                        バブルス！<br>
                        バターカップ！<br>
                        強くて可愛い正義の味方！みんなのアイドル！パワーパフガールズゥ！</p>
                        <img src="DAY1-14.png"  width="700">

                        <p>もうダメだ、完全に脳がバグった。<br>
                          俺のIQが急速に低下していく……<br>
                          100… 90… 50… 10… 3…<br>
                          「ブロッサム！」「バブルス！」「バターカップ！」<br>
                          俺はパワーパフガールズになった。<br>
                          完全に脳内はカートゥーンネットワークである。<br>
                          解説する気も失せるが、下の挙動をするためにhtml、app.py、requirements.txt、.vercelと4つファイルがあって、多分どれかが裏切り者。<br>
                          もう絶対こいつらの中に犯人がいる。おまえか、.vercel！！<br>

                        <img src="DAY1-10.png"  width="700">

                        <p>そして、犯人探しを始めて数時間後、精神的に限界を迎えた私は、<br>
                        「もう全部ダメだ！私は開発者をやめるぞジョジョーーーッ！！」と叫びながら、布団にダイブする準備をしていた。<br>
                         本当にこれ無理。誰だよ、ＡＩとか言いだしたやつ。死で償え！！！！と４回目の発狂をしかけた矢先…<br>
                           
                        <img src="DAY1-15.png"  width="1300">

                        <p>あだおか AI Chat API is running!<br>
                            あ…成功した…。<br>
                            え？うそ？何が…？<br>

                            <p>「見ろ！人がゴミのようだ！」…いや、違うな。<br>
                            「世界の理が、今ここに書き換えられる…」…いや、それも違う。</p>
                            
                            <p>結局、「おっ、動いたわｗｗｗ」とただのオタクみたいなテンションで<br>
                            私は画面を二度見、三度見、最終的にF5連打した。</p>

                            <p>ということで、これで無事にインターネット上でどこでも使えるWebアプリ「あだT」が完成。<br>
                            図らずも、omeedayos projectsという謎のプロジェクトサイト上であだおかAIが作動することとなった。（これ本当に偶然）</p>
 
                         <p>こうして、私の三連休の丸二日をつぶして、あだおかAIが完成した。<br>
                             丸二日間ぶっ通しで作業をしたことで、多少の知識は身についただろうが、<br>
                             まずは今回の一連の作業を通じて、大きな反省点があるため、ここに記しておきたい。</p>
                             
                             <p>それは…</p>
 
                          <p>外人をナンパするときは、ちゃんと英語を覚えた方がいいよ！！！！！（真に遺憾であるっ…）<br>
                            そしてPythonのエラーはすべて「おまえか、.vercel！！」で片付けられる。そういう世界線で生きることにした。</p>
                          
                          <p>（完）</p>
 


                  </div>
                  
